<!DOCTYPE html>
<html>
<head>
    <title>Manage Users</title>
</head>
<body>
    <h1>Manage Users</h1>

    <h2>Patients</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for patient in patients %}
                <tr>
                    <td>{{ patient.username }}</td>
                    <td>{{ patient.email }}</td>
                    <td>{{ patient.phone }}</td>
                    <td>
                        {% if patient.is_active %}
                            Active
                        {% else %}
                            Inactive
                        {% endif %}
                    </td>

                    <td>
                        <form method="post">
                            {% csrf_token %}
                            <input type="hidden" name="user_id" value="{{ patient.id }}">
                            <input type="hidden" name="user_type" value="patient">
                            {% if patient.is_active %}
                                <button type="submit" name="action" value="deactivate">Deactivate</button>
                            {% else %}
                                <button type="submit" name="action" value="activate">Activate</button>
                            {% endif %}
                            <button type="submit" name="action" value="reset_password">Reset Password</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Doctors</h2>
    <table border="1">
          <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for doctor in doctors %}
                <tr>
                    <td>{{ doctor.username }}</td>
                    <td>{{ doctor.email }}</td>
                    <td>{{ doctor.phone }}</td>
                    <td>
                        {% if doctor.is_active %}
                            Active
                        {% else %}
                            Inactive
                        {% endif %}
                    </td>

                    <td>
                        <form method="post">
                            {% csrf_token %}
                            <input type="hidden" name="user_id" value="{{ doctor.id }}">
                            <input type="hidden" name="user_type" value="doctor">
                            {% if doctor.is_active %}
                                <button type="submit" name="action" value="deactivate">Deactivate</button>
                            {% else %}
                                <button type="submit" name="action" value="activate">Activate</button>
                            {% endif %}
                            <button type="submit" name="action" value="reset_password">Reset Password</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Admins</h2>
    <table border="1">
         <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for admin in admins %}
                <tr>
                    <td>{{ admin.username }}</td>
                    <td>{{ admin.email }}</td>
                    <td>{{ admin.phone }}</td>
                    <td>
                        {% if admin.is_active %}
                            Active
                        {% else %}
                            Inactive
                        {% endif %}
                    </td>

                    <td>
                        <form method="post">
                            {% csrf_token %}
                            <input type="hidden" name="user_id" value="{{ admin.id }}">
                            <input type="hidden" name="user_type" value="admin">
                            {% if admin.is_active %}
                                <button type="submit" name="action" value="deactivate">Deactivate</button>
                            {% else %}
                                <button type="submit" name="action" value="activate">Activate</button>
                            {% endif %}
                            <button type="submit" name="action" value="reset_password">Reset Password</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
